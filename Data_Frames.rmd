---
title: "Aprendiendo a usar Data Frames"
author: "Ramiro Casó"
date: "3/17/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## ¿Qué es un Data Frame?
Un data frame no es otra cosa que una tabla de datos en la que las filas representan las observaciones y las columnas las variables. El DF, a diferencia de la matriz, puede almacenar diferentes tipos de varialbes (eso quiere decir, diferentes niveles de medidas)

Veamos un data frame que viene ya en RStudio: mtcars 

```{r}
# Imprimir el DF mtcars
mtcars 
```
## Echémosle una mirada rápida al data frame. 

R permite trabajar con grandes cantidades de datos, por lo que verlos todos es imposible salvo que nuestro DF sea realmente pequeño. .

La función head() permite ver las primeras filas de tu DF. De forma similar, la función tail() muestra las últimas observaciones. 


```{r}
  # Usa head() en mtcars
head(mtcars)

  # Usa tail() en mtcars
tail(mtcars)
```

# Viendo la estructura

Otra opción es ver la estructura, usando la función str()

Para nuestro data frame, podemos ver aspectos como: 

1. El numero total de observaciones (ej. 32 tipos de carros)
2. El número total de varialbes (ej. 11 atributos o variables)
3. La lista completa de las variables con sus nombres (ej. mpg, cyl,...)
4. El tipo de dato en cada variable o el nivel de medida (ej. num) 
5. Las primeras observaciones. 

Usar la función str() es de las primeras cosas que debemos hacer cuando tenemos un data frame nuevo. 


```{r}
# Revisemos la estructura de mtcars con str()
str(mtcars)
```

# Creando un Data Frame

Construyamos un DF con información de planetas. Las características principales de estos planetas son: 

* Tipo de planeta (Terrestrial or Gas Giant).
* El diámetro del planeta relativo al diámetro de la tierra.
* La rotación del planeta en relación al sol relativa a la rotación de la tierra
* Si el planeta tiene anillos o no (TRUE or FALSE)

Necesitamos crear los vectores necesarios: name, type, diamater, rotation y ring. 
```{r}
  # Definición de los vectores
name <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# Una vez creados los vectores, hacemos el data frame y lo llamamos planets_df
planets_df <-data.frame(name, type, diameter, rotation, rings)

# Aprovechemos y apliquemos lo aprendido viendo la estructura del nuevo DF
str(planets_df)
```
# Seleccionando datos de un data frame

Para escoger datos de un data frame podemos usar los brackets []. Separando los números con comas, el primero indica que fila buscar y el segundo que columna buscar. Así, por ejemplo planets_df[1,3] busca el dato de la primera fila y la tercera columna. 

Si dejamos alguno de los dos espacios libres, R te devuelve todos los datos en las filas o la columnas. Por ejemplo, planets_df[4,] te devuelve todos los valores de las variables (es decir, todas las columnas) para la fila 4. 

También podemos hacer rangos, separando los números con dos puntos. Por ejemplo, si usamos planets_df[1:3,2:4], R te devuelve las variables de las columnas 2,3 y 4 para las filas 1,2 y 3. 

Veamos. 

```{r}
# veamos el diámetro de Mercury (fila 1, columna 3)
planets_df[1,3]

# ahora veamos todos los valores para Mars (la fila 4 completa)
planets_df[4,]
```
Otra forma de seleccionar es usando el nombre de la variable en lugar de su número. Esto puede ser más útil cuando se tienen data frames muy anchos (con muchas variables)
```{r}
# seleccionar columnas usando sus nombres. Veamos las primeras tres filas de la variable "type"
planets_df[1:3,"type"]
```

A veces queremos seleccionar una columna entera. Hay varias formas de hacer eso. 
Una es como ya vimos: 
planets_df[,3]
planets_df[,"diameter"]
Pero también podemos hacer un vector nuevo y usamos el signo de $ para decirle a R cual columna del data frame queremos. 
Por ejemplo, si queremos la columna "diamater", podemos hacer 
diameter_planets <- planets_df$diameter. 
Veámoslo en código. 
```{r}
planets_df[,3]
planets_df[,"diameter"]
diameter_vector <-planets_df$diameter # Noten que este código crea un vector aparte, llamado diameter_vector
diameter_vector
```



